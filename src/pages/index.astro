---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <style>
      :root {
        --accent: 229, 69, 96;
        --accent-dark: 243, 156, 18;
        --gray: 96, 115, 159;
        --gray-light: 229, 233, 240;
        --gray-dark: 34, 41, 57;
        --box-shadow: 0 2px 6px rgba(var(--gray), 0.25), 0 8px 24px rgba(var(--gray), 0.33);
      }
      body {
        font-family: 'Inter', system-ui, sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
        min-height: 100vh;
        color: #fff;
      }
      main {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2em;
      }
      .hero {
        text-align: center;
        padding: 4em 2em;
        background: linear-gradient(135deg, rgba(229, 69, 96, 0.1), rgba(243, 156, 18, 0.1));
        border-radius: 20px;
        margin-bottom: 3em;
      }
      .hero h1 {
        font-size: 3em;
        margin: 0 0 0.5em;
        background: linear-gradient(90deg, #e94560, #f39c12);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .hero p {
        font-size: 1.2em;
        color: rgba(255, 255, 255, 0.8);
        max-width: 600px;
        margin: 0 auto;
      }
      h2 {
        font-size: 2em;
        margin-bottom: 1em;
        color: #fff;
      }
      .posts-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 2em;
      }
      .post-card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 16px;
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .post-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(233, 69, 96, 0.2);
      }
      .post-card a {
        text-decoration: none;
        color: inherit;
        display: block;
        padding: 1.5em;
      }
      .post-card h3 {
        margin: 0 0 0.5em;
        font-size: 1.3em;
        color: #fff;
        line-height: 1.4;
      }
      .post-card .date {
        font-size: 0.85em;
        color: rgba(255, 255, 255, 0.6);
        margin-bottom: 0.5em;
      }
      .post-card .description {
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.95em;
        line-height: 1.6;
      }
      .category-tag {
        display: inline-block;
        background: linear-gradient(135deg, rgb(var(--accent)), rgb(var(--accent-dark)));
        color: white;
        padding: 0.2em 0.6em;
        border-radius: 15px;
        font-size: 0.75em;
        margin-bottom: 0.5em;
      }
      @media (max-width: 720px) {
        .hero h1 {
          font-size: 2em;
        }
        .posts-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <Header />
    <main>
      <section class="hero">
        <h1>üí∞ SideBuzCom</h1>
        <p>Side Hustle Ideas for Students to Make Extra Money Online. Discover proven ways to earn money and have fun along the way!</p>
      </section>
      
      <h2>üìù Latest Posts</h2>
      <section class="posts-grid">
        {
          posts.map((post) => (
            <article class="post-card">
              <a href={`/${post.id.replace('.md', '')}/`}>
                {post.data.category && <span class="category-tag">{post.data.category}</span>}
                <h3>{post.data.title}</h3>
                <p class="date">
                  <FormattedDate date={post.data.pubDate} />
                </p>
                {post.data.description && <p class="description">{post.data.description}</p>}
              </a>
            </article>
          ))
        }
      </section>
    </main>
    <Footer />
  </body>
</html>
